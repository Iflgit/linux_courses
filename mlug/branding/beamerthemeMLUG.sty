% Copyright 2013,2016,2018 by Denis Pynkin <denis_pynkin@epam.com>
% Copyright 2016 by Andrej Zacharevicz <andrej_zacharevicz@epam.com>
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\ProvidesPackage{beamerthemeMLUG}
  [2018/10/28 v0.1 beamer 'MLUG' theme]

\mode<presentation>

\usefonttheme{default}
\useinnertheme[shadow=true]{rounded}
\useoutertheme{shadow}

\setbeamertemplate{navigation symbols}{}

\definecolor{mlugBlue}{HTML}{3A5C9E}
\definecolor{mlugRed}{HTML}{DD251D}
\definecolor{mlugGrey}{HTML}{C1C1C1}

\setbeamercolor*{lineup}{parent=palette primary}
\setbeamercolor*{linemid}{parent=palette secondary}
\setbeamercolor*{linebottom}{parent=palette tertiary}

% system colors redefination
\setbeamercolor{structure}{fg=black}
\setbeamercolor*{frametitle}{fg=mlugBlue,bg=white}
\setbeamercolor*{frametitle right}{bg=white}

\setbeamercolor*{item}{fg=mlugBlue}
\setbeamercolor*{normal text}{fg=black}

% redifining lists marker
\setbeamertemplate{itemize items}[circle]
\setbeamertemplate{enumerate items}[circle]

% redifining TOC marker
\setbeamertemplate{section in toc}[circle]
\setbeamertemplate{subsection in toc}[circle]
\setbeamertemplate{section in toc shaded}[circle]
\setbeamertemplate{subsection in toc shaded}[circle]

% some lengths (the height of the lines)
\newlength{\beamer@decolines@lineup}
\setlength{\beamer@decolines@lineup}{.001\paperheight}

\newlength{\beamer@decolines@linemid}
\setlength{\beamer@decolines@linemid}{.035\paperheight}

\newlength{\beamer@decolines@linebottom}
\setlength{\beamer@decolines@linebottom}{.002\paperheight}

\newlength{\beamer@decolines@headline}
\setlength{\beamer@decolines@headline}{.015\paperheight}

% String used between the current page and the total page count.
\def\beamer@decolines@pageofpages{/}

\setbeamerfont{frametitle}{series=\bfseries}
%\setbeamerfont{title}{series=\bfseries}

% colors for headline
% headline
\setbeamertemplate{headline}{%
}

% Footline
\defbeamertemplate*{footline}{decolines theme}
{
  % Check if this is a title frame. 
  \ifnum \insertpagenumber=1
    %Placeholder for the title frame. If this code will be removed position of footers on all other frames will be broken
    % Second line.
    \begin{beamercolorbox}[ht=\beamer@decolines@linemid,dp=5pt]{}
    \end{beamercolorbox}
    % Third line.
    \hbox{%
    \begin{beamercolorbox}[wd=\paperwidth,ht=\beamer@decolines@linebottom,dp=0pt]{}%
    \end{beamercolorbox}%
    }
  \else
    % First line.
    \begin{beamercolorbox}[wd=0.99\paperwidth,ht=\beamer@decolines@lineup,right]{}
      {\includegraphics[height=.15\textheight]{mlug}}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=\beamer@decolines@linemid]{epamlinestring}
    \begin{beamercolorbox}[wd=.10\paperwidth,ht=\beamer@decolines@linemid,dp=5pt,center]{}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.80\paperwidth,ht=\beamer@decolines@linemid,dp=5pt,center]{}%
          \inserttitle
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.10\paperwidth,ht=\beamer@decolines@linemid,dp=5pt,center]{}%
          \insertframenumber / \inserttotalframenumber
    \end{beamercolorbox}%
    \end{beamercolorbox}
    % Third line.
    \begin{beamercolorbox}[wd=\paperwidth,ht=\beamer@decolines@linebottom,dp=0pt]{}%
    \end{beamercolorbox}%
  \fi
}

\defbeamertemplate*{title page}{customized}[1][]
{
  \center
  \bigskip
  \includegraphics[height=0.20\textheight,keepaspectratio]{mlug}\par
  \bigskip
  \usebeamerfont{title}{\textsc\inserttitle}\par
  \usebeamerfont{subtitle}\MakeUppercase{\insertsubtitle}\vfill\par
  \bigskip
  \usebeamerfont{author}\insertauthor\par
  \usebeamerfont{institute}\insertinstitute\vfill\par
  \bigskip
  \usebeamerfont{date}\insertdate\par
  % To start frame counter from the one next to title, not from title itself
  \addtocounter{framenumber}{-1}
}


\setbeamercolor{block title}{use=structure,fg=white,bg=mlugBlue}
\setbeamercolor{block title alerted}{use=alerted text,fg=white,bg=mlugRed}
\setbeamercolor{block title example}{use=example text,fg=mlugBlue,bg=mlugGray}

\makeatother

\mode <all>
